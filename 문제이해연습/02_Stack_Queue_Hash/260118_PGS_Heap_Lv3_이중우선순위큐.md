# [260118_PGS_Heap_Lv3_ì´ì¤‘ìš°ì„ ìˆœìœ„í]
> [ë¬¸ì œ ì¶œì²˜](https://school.programmers.co.kr/learn/courses/30/lessons/42628) <br/>

## 1. ğŸ” ë¶„ì„ (10ë¶„)
- **ì œì•½ & ë³µì¡ë„**:
   - N = 10^6 -> O(2 * N logN) # ì´ì¤‘ ìš°ì„ ìˆœìœ„ í

- **ìœ í˜• & ìë£Œêµ¬ì¡°**: Heap
- **í•µì‹¬ ë¡œì§ (Key Idea)**: 
   1. [ì „ì²˜ë¦¬] 
      - ë¹„ì–´ìˆëŠ” heap ê°¹ì±„ ì´ˆê¸°í™” (ìµœì†Œ ìš°ì„ ìˆœìœ„ í™)

   2. [ë©”ì¸ ë¡œì§] (ì˜ˆì™¸/íƒˆì¶œ ì¡°ê±´ í¬í•¨)
      
      > **[ë‚˜ì˜ ì œì¶œ]**
      - for ë¬¸ìœ¼ë¡œ operationsì˜ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ìˆœíšŒ 
         - 'I ìˆ«ì' ì¸ ê²½ìš° 
            - heap ì— ìˆ«ì ì‚½ì… ; heappush(heap)
         - 'D 1' ì¸ ê²½ìš°  
            - íì—ì„œ ìµœëŒ“ê°’ ì‚­ì œ ; heappop(-heap)
            - ë§ˆì´ë„ˆìŠ¤ ì²˜ë¦¬í›„ popí•˜ì—¬ ìµœëŒ“ê°’ pop
         - 'D -1' ì¸ ê²½ìš°
            - íì—ì„œ ìµœì†Ÿê°’ ì‚­ì œ : heappop(heap)

      > **[AI í”¼ë“œë°±: ì •ì„ í’€ì´ (Two Heaps + Lazy Update)]**
      > *ë‹¨ìˆœíˆ -heapì„ í•œë‹¤ê³  ìµœëŒ€ í™ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‘ ê°œì˜ í™ì„ ì“°ê³  ë™ê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤.*
      
      - **í•µì‹¬**: min_heapê³¼ max_heap 2ê°œë¥¼ ì‚¬ìš©í•˜ê³ , ì‚­ì œ ì—¬ë¶€ë¥¼ visited ë°°ì—´ë¡œ ê´€ë¦¬(ë™ê¸°í™”).
      - **ì´ˆê¸°í™”**: 
         - min_heap = []
         - max_heap = []
         - visited = [False] * 1000001
      - **Loop**: operations ìˆœíšŒ (ì¸ë±ìŠ¤ ië¥¼ ê³ ìœ  IDë¡œ í™œìš©)
         - **'I ìˆ«ì'**: 
            - min_heapì— (num, i) push
            - max_heapì— (-num, i) push
            - visited[i] = True (ê°’ ì¡´ì¬í•¨ ë§ˆí‚¹)
         - **'D 1' (ìµœëŒ“ê°’ ì‚­ì œ)**:
            - max_heapì—ì„œ **ì´ë¯¸ ì‚­ì œëœ ë…¸ë“œ(visited[id]==False)**ëŠ” popìœ¼ë¡œ ë‹¤ ë²„ë¦¼ (Lazy Delete).
            - `ìœ íš¨í•œ ë…¸ë“œê°€ ë‚˜ì˜¤ë©´ pop í•˜ê³ `, visited[id] = False ì²˜ë¦¬.
         - **'D -1' (ìµœì†Ÿê°’ ì‚­ì œ)**:
            - min_heapì—ì„œ **ì´ë¯¸ ì‚­ì œëœ ë…¸ë“œ**ëŠ” popìœ¼ë¡œ ë‹¤ ë²„ë¦¼.
            - `ìœ íš¨í•œ ë…¸ë“œê°€ ë‚˜ì˜¤ë©´ pop í•˜ê³ `, visited[id] = False ì²˜ë¦¬.

   3. [ìµœì¢… ê²°ê³¼] (return ê°’)
      - >**[ë‚˜ì˜ ì œì¶œ]**: 
         - [heappop(heap), heappop(-heap)]
      - >**[AI í”¼ë“œë°±]**:
         - Loop ì¢…ë£Œ í›„ í•œë²ˆ ë” **Lazy Delete ì²­ì†Œ** (ì–‘ìª½ í™ì— ë‚¨ì•„ìˆëŠ” ì“°ë ˆê¸° ê°’ ì œê±°).
         - í™ì´ ë¹„ì—ˆìœ¼ë©´ [0, 0]
         - ì•„ë‹ˆë©´ [-max_heap[0][0], min_heap[0][0]] ë°˜í™˜

- **ì²´í¬ í¬ì¸íŠ¸**:
   - [x] N=1 ë˜ëŠ” 0ì¼ ë•Œ (ìµœì†Œ ì…ë ¥)
   - [x] ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° (Empty)
   - [x] ëª¨ë“  ê°’ì´ ë™ì¼í•œ ê²½ìš°
   - [x] ì •ë‹µì´ ìŒìˆ˜ì´ê±°ë‚˜ 0ì¼ ê°€ëŠ¥ì„±
   - [x] ê°’ì˜ ë³€í™”ê°€ íŠ¹ì • ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ì•ˆ ë˜ëŠ”ê°€? (Max/Min Check)

---

## 2. ğŸ“š í•™ìŠµ (5ë¶„)
> ì´ ë¬¸ì œë¥¼ í†µí•´ ìƒˆë¡œ ì•Œê²Œ ëœ ì ì´ë‚˜ ë‹¤ì‹œ í™•ì¸í•œ ê°œë…ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

**â‘  ì˜¤ëŠ˜ì˜ ì•Œê³ ë¦¬ì¦˜/ê°œë…**
> **Two Heaps & Lazy Update (ì§€ì—° ì‚­ì œ)**
- **ë¬¸ì œ ìƒí™©**: ìµœì†Œ í™(min_heap)ì—ì„œ ìµœëŒ“ê°’ì„ ì‚­ì œí•˜ê±°ë‚˜, ìµœëŒ€ í™(max_heap)ì—ì„œ ìµœì†Ÿê°’ì„ ì‚­ì œí•´ì•¼ í•  ë•Œ remove(val)ëŠ” O(N)ì´ë¼ ë¹„íš¨ìœ¨ì ì´ë‹¤.
- **í•´ê²°ì±…**:
  1. ë‘ ê°œì˜ í™(min, max)ì„ ìš´ì˜í•˜ë©° ë°ì´í„°ë¥¼ (ê°’, id) í˜•íƒœë¡œ ì–‘ìª½ì— ë‹¤ ë„£ëŠ”ë‹¤.
  2. ì‚­ì œ ì‹œ, í•´ë‹¹ í™ì˜ Top(O(logN))ë§Œ ì œê±°í•˜ê³ , ë°˜ëŒ€ìª½ í™ì— ìˆëŠ” ë°ì´í„°ëŠ” ë†”ë‘”ë‹¤. ëŒ€ì‹  visited[id] = Falseë¡œ ì‚­ì œë¨ì„ í‘œì‹œí•œë‹¤.
  3. ê°’ì„ êº¼ë‚¼ ë•Œ(pop), visited[id]ë¥¼ í™•ì¸í•˜ì—¬ ì´ë¯¸ ì‚­ì œëœ ê°’(ì£½ì€ ë°ì´í„°)ì´ë©´ "ì§€ì—° ì²˜ë¦¬"í•˜ì—¬ ë²„ë¦°ë‹¤.
 
**â‘¡ Python Code Snippet (íŒ¨í„´ ì €ì¥)**
 > **1. Lazy Update/Delete í•µì‹¬ (ë™ê¸°í™”)**
```python
# 'ì§€ì›Œì•¼ í•  ë†ˆ'ì´ Topì— ìˆìœ¼ë©´ ê³„ì† êº¼ë‚´ì„œ ë²„ë¦¼
while min_heap and not visited[min_heap[0][1]]: 
    heapq.heappop(min_heap)

if min_heap:
    visited[min_heap[0][1]] = False # ì‹¤ì œ ì‚­ì œ ë§ˆí‚¹
    heapq.heappop(min_heap)
```

> **2. ê³ ìœ  ID ìƒì„± (enumerate) ë° ì „ì²´ êµ¬ì¡°**
```python
import heapq

min_heap = []
max_heap = []
visited = [False] * 1_000_001 # Në§Œí¼

# enumerateë¡œ (index, value)ë¥¼ ë™ì‹œì— ì–»ìŒ -> indexë¥¼ IDë¡œ í™œìš©
for i, op in enumerate(operations):
    cmd, n = op.split()
    num = int(n)
    
    if cmd == 'I': # ID(i)ì™€ í•¨ê»˜ ì‚½ì…
        heapq.heappush(min_heap, (num, i))
        heapq.heappush(max_heap, (-num, i))
        visited[i] = True # ië²ˆì§¸ ë°ì´í„° ì‚´ì•„ìˆìŒ
```

---

<!-- ğŸ’¡ ì‚¬ìš© íŒ

## ğŸ’¡ ì°¸ê³  ì‹œíŠ¸
> ìœ í˜•, ìë£Œêµ¬ì¡°, ë³µì¡ë„, ì²´í¬ í¬ì¸íŠ¸ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

1. ğŸ¯ ëª©í‘œ ë³µì¡ë„ ê°€ì´ë“œ (Nì˜ í¬ê¸° âœ ì‹œê°„ ë³µì¡ë„)
   - N â‰¤ 20     âœ O(2^N)  : ë°±íŠ¸ë˜í‚¹, ì¬ê·€, ì™„ì „íƒìƒ‰
   - N â‰¤ 1,000  âœ O(N^2)  : 2ì¤‘ Forë¬¸, DP, 2ì°¨ì› ë°°ì—´
   - N â‰¤ 10ë§Œ   âœ O(NlogN): ì •ë ¬, í™, ì´ë¶„íƒìƒ‰, ë‹¤ìµìŠ¤íŠ¸ë¼, ìœ ë‹ˆì˜¨íŒŒì¸ë“œ
   - N â‰¤ 100ë§Œ  âœ O(N)    : íˆ¬ í¬ì¸í„°, ê·¸ë¦¬ë””, DP, ìŠ¤íƒ/í, í•´ì‹œ
-------------------------------------------------------
2. ğŸ§© ì•Œê³ ë¦¬ì¦˜ ìœ í˜• (íŒŒì¼ëª… ì•½ì–´)
   - [ê¸°ë³¸] Impl(êµ¬í˜„), Sim(ì‹œë®¬ë ˆì´ì…˜), BF(ë¸Œë£¨íŠ¸í¬ìŠ¤, ì™„ì „íƒìƒ‰)
   - [íƒìƒ‰] BFS(ë„ˆë¹„ìš°ì„ ), DFS(ê¹Šì´ìš°ì„ ), Back(ë°±íŠ¸ë˜í‚¹), BinSearch(ì´ë¶„íƒìƒ‰)
   - [ìµœì í™”] Greedy(ê·¸ë¦¬ë””), DP(ë™ì ê³„íšë²•)
   - [ê·¸ë˜í”„] Dijkstra(ë‹¤ìµìŠ¤íŠ¸ë¼), Floyd(í”Œë¡œì´ë“œì›Œì…œ), Topo(ìœ„ìƒì •ë ¬), MST
   - [ê¸°íƒ€] TwoPtr(íˆ¬ í¬ì¸í„°), Sliding(ìŠ¬ë¼ì´ë”© ìœˆë„ìš°), Prime(ì†Œìˆ˜íŒë³„)
-------------------------------------------------------
3. ğŸ“¦ ìë£Œêµ¬ì¡° ì„ íƒ
   - [ì„ í˜•] List(ë°°ì—´), Stack(ìŠ¤íƒ), Queue(í), Deque(ë±)
   - [ë¹„ì„ í˜•] Graph(ì¸ì ‘ë¦¬ìŠ¤íŠ¸/í–‰ë ¬), Tree(íŠ¸ë¦¬), Heap(ìš°ì„ ìˆœìœ„ í)
   - [ê²€ìƒ‰/ì§‘í•©] Set(ì§‘í•©), Dictionary(í•´ì‹œë§µ)
-------------------------------------------------------
4. âš ï¸ í•„ìˆ˜ ì²´í¬ í¬ì¸íŠ¸ (Edge Case)
   - [ ] N=1 ë˜ëŠ” 0ì¼ ë•Œ (ìµœì†Œ ì…ë ¥)
   - [ ] ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° (Empty)
   - [ ] ëª¨ë“  ê°’ì´ ë™ì¼í•œ ê²½ìš°
   - [ ] ì •ë‹µì´ ìŒìˆ˜ì´ê±°ë‚˜ 0ì¼ ê°€ëŠ¥ì„±
   - [ ] ê°’ì˜ ë³€í™”ê°€ íŠ¹ì • ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ì•ˆ ë˜ëŠ”ê°€? (Max/Min Check)
   - [ ] ì¬ê·€ ê¹Šì´ ì œí•œ (sys.setrecursionlimit)
   - [ ] ë¦¬ìŠ¤íŠ¸ ë³µì‚¬ ì£¼ì˜ (ì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬)
-------------------------------------------------------

-->